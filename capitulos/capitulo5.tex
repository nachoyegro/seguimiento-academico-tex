\chapter{Pruebas realizadas}
\label{sec:implementacion}

\section[Pruebas y resultados]{Pruebas y resultados}

\subsection[Resultados esperados]{Resultados esperados}

Se espera con este desarrollo tener un sistema capaz de brindarle datos a todos los interesados. Para que esto se cumpla, la implementación tiene que ser capaz de manejar todos los pedidos que recibe y responder en consecuencia. 
Si bien la problemática inicial implica que sólo se consultarán datos para analizarlos y ser visualizados por los directores de las carreras de la Universidad Nacional de Quilmes, no hay que descartar que pueda ser extendido dado su potencial.
Para garantizar que todo funcione de manera correcta se realizaron diferentes pruebas con escenarios cambiantes.
Para todas las pruebas se usaron los mismos URIs y se realizaron sobre una base de datos con 1.424 alumnos y 13.234 materias cursadas por estos alumnos.
La arquitectura utilizada para las pruebas se asemeja a la que dispondrá a la hora de la implementación.


\break
\subsection{Pruebas con 100 usuarios simultáneos}
\break
En primer lugar, se realizó una prueba en la cual 100 usuarios simultáneos se encuentran haciendo pedidos al núcleo, el cual está desplegado en una sola instancia de docker.
Esta prueba duró 5 minutos y los resultados se muestran a continuación.


\subsubsection{Resultados generales de la prueba}
\begin{table}[!htbp]
    \centering
    \makegapedcells
    \begin{tabular}{|c|c|c|c|}
    \hline
    Nombre del Pedido & Cantidad & Errores (\%) & Tiempo Promedio (ms) \\ \hline
    Total & 16977 & 0.00\% & 1043.79\\ \hline
    Carrera | graduados & 2834 & 0.00\% & 1038.98\\ \hline
    Carrera | ingresantes & 2871 & 0.00\% & 1057.51\\ \hline
    Carrera | postulantes & 2850 & 0.00\% & 1046.61\\ \hline
    Carreras & 2793 & 0.00\% & 1851.00\\ \hline
    Plan | Materias necesarias & 5629 & 0.00\% & 1036.10\\ \hline
    
    \end{tabular}
    \caption{Pruebas realizadas con 100 usuarios simultáneos durante 5 minutos}
    \label{tab:tabla_planes}
\end{table}

En este caso el núcleo fue capaz de resolver todos los pedidos y responder sin problemas.

\subsubsection{Resultados sobre el uso de recursos durate la prueba}
\begin{table}[!htbp]
    \centering
    \makegapedcells
    \begin{tabular}{|c|c|c|}
    \hline
    Contenedor & CPU & Memoria (MB)\\ \hline
    Núcleo & 68\% & 55 \\ \hline
    \end{tabular}
    \caption{Recursos en promedio consumidos por el contenedor durante la prueba}
    \label{tab:tabla_planes}
\end{table}

En promedio utilizó un 68\% del CPU y 55MB de memoria RAM.


\subsubsection{APDEX de la prueba}

APDEX (Índice de Performance de la Aplicación, por sus siglas en inglés) es un estandard abierto para medir la performance de una a aplicación de software. Su propósito es convertir las mediciones en información sobre la satisfacción del usuario, al especificar una forma uniforme de analizar e informar sobre el grado en que el rendimiento medido cumple con las expectativas del usuario.
Para realizar una medición APDEX, es necesario establecer un tiempo \emph{satisfactorio} y un tiempo \emph{tolerable}.
Una vez establecidos estos valores y tendo los resultados de la prueba, se calcula el índice:

\begin{align*}
  Apdex = \frac{Satisfactorios + \frac{Tolerables}{2}}{Total}\\
\end{align*}
\break
\begin{table}[!htbp]
    \centering
    \makegapedcells
    \begin{tabular}{|c|c|c|}
    \hline
    APDEX Total & Tolerancia & Frustración\\ \hline
    0.995 & 2 seg & 3 seg \\ \hline
    \end{tabular}
    \caption{APDEX de la prueba con 100 usuarios durante 5 minutos}
    \label{tab:tabla_planes}
\end{table}


\break

\subsection{Pruebas con 500 usuarios simultáneos}
Luego de la primer prueba, se realizó una segunda en la cual 500 usuarios simultáneos se encuentran haciendo pedidos al núcleo, el cual está desplegado en una sola instancia de docker.
Esta prueba duró 10 minutos y los resultados se muestran a continuación.

\subsubsection{Resultados generales de la prueba}
\begin{table}[!htbp]
    \centering
    \makegapedcells
    \begin{tabular}{|c|c|c|c|}
    \hline
    Nombre del Pedido & Cantidad & Errores (\%) & Tiempo Promedio (ms) \\ \hline
    Total & 71331 & 56.62\% & 2164.69\\ \hline
    Carrera | graduados & 11930 & 56.32\% & 2195.59\\ \hline
    Carrera | ingresantes & 12111 & 55.81\% & 2382.85\\ \hline
    Carrera | postulantes & 12019 & 56.14\% & 2296.47\\ \hline
    Carreras & 11684 & 57.56\% & 2049.56\\ \hline
    Plan | Materias necesarias & 23587 & 56.98\% & 2026.94\\
    \end{tabular}
    \caption{Pruebas realizadas con 500 usuarios simultáneos durante 10 minutos}
    \label{tab:tabla_planes}
\end{table}

\subsubsection{Resultados sobre el uso de recursos durate la prueba}
\begin{table}[!htbp]
    \centering
    \makegapedcells
    \begin{tabular}{|c|c|c|}
    \hline
    Contenedor & CPU & Memoria (MB)\\ \hline
    Núcleo & 88\% & 55 \\ \hline
    \end{tabular}
    \caption{Recursos en promedio consumidos por el contenedor durante la prueba}
    \label{tab:tabla_planes}
\end{table}

\subsubsection{APDEX de la prueba}
\begin{table}[!htbp]
    \centering
    \makegapedcells
    \begin{tabular}{|c|c|c|}
    \hline
    APDEX Total & Tolerancia & Frustración\\ \hline
    0.265 & 2 seg & 3 seg \\ \hline
    \end{tabular}
    \caption{APDEX de la prueba con 500 usuarios durante 10 minutos y una instancia de la aplicación}
    \label{tab:tabla_planes}
\end{table}

\subsection{Pruebas con 500 usuarios simultáneos con dos instancias}
Luego de la primer prueba, se realizó una segunda en la cual 500 usuarios simultáneos se encuentran haciendo pedidos al núcleo que desplegado en dos instancias de docker.
Esta prueba duró 10 minutos y los resultados se muestran a continuación.

\subsubsection{Resultados generales de la prueba}
\begin{table}[!htbp]
    \centering
    \makegapedcells
    \begin{tabular}{|c|c|c|c|}
    \hline
    Nombre del Pedido & Cantidad & Errores (\%) & Tiempo Promedio (ms) \\ \hline
    Total & 75352 & 3.79\% & 4434.05\\ \hline
    Carrera | graduados & 12350 & 3.78\% & 4419.90\\ \hline
    Carrera | ingresantes & 12489 & 3.66\% & 4761.72\\ \hline
    Carrera | postulantes & 5937 & 3.79\% & 4568.80\\ \hline
    Carreras & 5605 & 3.89\% & 4167.33\\ \hline
    Plan | Materias necesarias & 11478 & 3.82\% & 4329.57\\
    \end{tabular}
    \caption{Pruebas realizadas con 500 usuarios simultáneos durante 10 minutos}
    \label{tab:tabla_planes}
\end{table}

\subsubsection{Resultados sobre el uso de recursos durate la prueba}
\begin{table}[!htbp]
    \centering
    \makegapedcells
    \begin{tabular}{|c|c|c|}
    \hline
    Contenedor & CPU & Memoria (MB)\\ \hline
    Núcleo-1 & 67\% & 54 \\ \hline
    Núcleo-2 & 68\% & 54 \\ \hline
    \end{tabular}
    \caption{Recursos en promedio consumidos por los contenedores durante la prueba}
    \label{tab:tabla_planes}
\end{table}
\subsubsection{APDEX de la prueba}
\begin{table}[!htbp]
    \centering
    \makegapedcells
    \begin{tabular}{|c|c|c|}
    \hline
    APDEX Total & Tolerancia & Frustración\\ \hline
    0.067 & 500ms & 1sec 500ms \\ \hline
    \end{tabular}
    \caption{APDEX de la prueba con 500 usuarios durante 10 minutos y dos instancias de la aplicación}
    \label{tab:tabla_planes}
\end{table}
\break
\section{Conclusión sobre las pruebas}



